CREATE DATABASE carDS;
USE carDS;
CREATE TABLE EMPLOYEE (
  EID CHAR(9)  NOT NULL,
  EName VARCHAR(50) NOT NULL,
  EPhone CHAR(10),
  Email VARCHAR(50),
  DoB DATE,
  BrID CHAR,
PRIMARY KEY(EID)
  FOREIGN KEY (BrID) REFERENCES BRANCH(BranchID) 
  ON DELETE SET NULL ON UPDATE CASCADE );


CREATE TABLE BRANCH(
BranchID CHAR(3) ,
BPhone CHAR(10) NOT NULL,
City VARCHAR(20),
State VARCHAR(10),
ZIP CHAR,
PRIMARY KEY(BranchID));
mgrID INT, 
FOREIGN KEY (mgrID) REFERENCES EMPLOYEE (EID)
ON DELETE SET NULL ON UPDATE CASCADE);

CREATE TABLE CAR (
    Price DECIMAL(10,2),
    license_number VARCHAR(255) PRIMARY KEY,
    Make VARCHAR(255),
    Year INT,
    Model VARCHAR(255)
);

CREATE TABLE ASSOCIATED_CAR (
    licenseNum VARCHAR(20)  NOT NULL,
    BrID INT NOT NULL,
    EmpID INT NOT NULL,
PRIMARY KEY (licenseNum),
FOREIGN KEY (licenseNum) REFERENCES CAR(license_number),
    FOREIGN KEY (BrID) REFERENCES BRANCH(BranchID),
    FOREIGN KEY (EmpID) REFERENCES EMPLOYEE(EID),
ON DELETE SET NULL   ON UPDATE CASCADE
);

CREATE TABLE OWNER (
    OwnerID INT AUTO_INCREMENT PRIMARY KEY,
    OwnerName VARCHAR(255)
);

CREATE TABLE OWNED_CAR (
    licenseNum VARCHAR(255),
    OwnerID INT,
    percent_owned DECIMAL(5,2),
    FOREIGN KEY (licenseNum) REFERENCES CAR (license_number),
    FOREIGN KEY (OwnerID) REFERENCES OWNER (OwnerID)
);

CREATE TABLE INSURANCE( 
InsuranceID CHAR(9) PRIMARY KEY  NOT NULL,
InsDetails VARCHAR(100) ,
licenseNum VARCHAR(50) NOT NULL,
type VARCHAR(50) NOY NULL,
FOREIGN KEY(licenseNum) REFERENCES CAR(license_number)
ON DELETE SET NULL      ON UPDATE CASCADE 
);

